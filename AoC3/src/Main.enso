from Standard.Base import all
from Standard.Table import all
from Standard.Database import all
from Standard.AWS import all
from Standard.Google_Api import all
from Standard.Snowflake import all
import Standard.Examples
import Standard.Visualization

main =
    text1 = "xmul(2,4)&mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))"
    node3 = Data.read 'X:\\NBO\\aoc24\\3-input.txt'
    node1 = Table.new [["A", [node3]]]
    table3 = node1.parse_to_columns 'A' "mul\((\d+),(\d+)\)"
    node2 = table3.set (expr '[A 1] *[A 2]') "Result"
    any1 = node2.aggregate columns=[..Sum 'Result']
    table2 = node1.tokenize_to_rows 'A' pattern="do\(\)|don't\(\)|mul\(\d+,\d+\)"
    table4 = Table.input [['A', ['do()', 'don\'t()']], ['Enabled', ['True', 'False']]]
    table5 = table2.join table4
    any2 = table5.remove_columns ['Right A']
    table6 = any2.fill_nothing ['Enabled'] Previous_Value
    table7 = table6.fill_nothing ['Enabled'] True
    any3 = table7.filter 'Enabled' ..Is_True
    table8 = any3.parse_to_columns 'A' "mul\((\d+),(\d+)\)"
    table9 = table8.filter_blank_rows
    node4 = table9.set (expr '[A 1] *[A 2]') "Result"
    any4 = node4.aggregate columns=[..Sum 'Result']



#### METADATA ####
[[{"index":{"value":270},"size":{"value":75}},"d619ae3d-cd50-458f-91a3-444b1b3562bf"],[{"index":{"value":358},"size":{"value":39}},"d40701f9-16b3-4479-991b-2a94fd2df4f7"],[{"index":{"value":410},"size":{"value":26}},"ead90d94-6e68-4c15-b269-93f1594c8e12"],[{"index":{"value":450},"size":{"value":22}},"2313002a-b2c8-4a2b-b920-de2fc25624d7"],[{"index":{"value":450},"size":{"value":26}},"90b382be-3f76-40f7-b2d1-a9a25651687e"],[{"index":{"value":450},"size":{"value":47}},"d4f3ca8c-70ee-47a4-91a8-7f5c2a66ff7f"],[{"index":{"value":510},"size":{"value":41}},"195871ba-8ada-4d23-a0ca-8a4e24f3b234"],[{"index":{"value":563},"size":{"value":15}},"2af79caa-3529-4c92-b3b9-022f99a0f4a4"],[{"index":{"value":563},"size":{"value":40}},"b96752c5-83b9-44b1-b2cd-0982ce8e4324"],[{"index":{"value":617},"size":{"value":22}},"b767092d-b9cb-479b-88d7-1c43a10da5e5"],[{"index":{"value":617},"size":{"value":26}},"8e4dfc38-ad64-477a-80af-b4a4395566a8"],[{"index":{"value":617},"size":{"value":68}},"04610df9-af34-4a05-80ce-8002a3c4db70"],[{"index":{"value":699},"size":{"value":11}},"25448166-8ed9-448b-b266-7abef975e38a"],[{"index":{"value":699},"size":{"value":73}},"54ee7065-aea3-495d-afbf-9fd94c7d1202"],[{"index":{"value":786},"size":{"value":11}},"8afa9fdd-0f3e-4e21-9ba1-e4f40354ed8c"],[{"index":{"value":786},"size":{"value":18}},"2b68a3dc-ce00-4742-ba5b-007f2d2cf3f2"],[{"index":{"value":816},"size":{"value":21}},"0617570f-507b-4011-95f3-6def84476125"],[{"index":{"value":816},"size":{"value":33}},"b57cb825-bc65-4189-b49a-4ae5c1f9dc3a"],[{"index":{"value":863},"size":{"value":17}},"21ee1a2b-21c9-4305-91e9-486978d4ca0a"],[{"index":{"value":863},"size":{"value":29}},"a0081028-dd92-4c8c-8c66-f25c28f27d08"],[{"index":{"value":863},"size":{"value":44}},"01225cb3-fd56-4375-a887-a6f5a04a59aa"],[{"index":{"value":921},"size":{"value":19}},"660c0b13-0ee6-424d-8234-b575e9a25b5d"],[{"index":{"value":921},"size":{"value":31}},"2ea4248b-647e-4d9c-b51f-6469aca536eb"],[{"index":{"value":921},"size":{"value":36}},"725af507-0c29-4168-b249-9d25c45f3b3b"],[{"index":{"value":969},"size":{"value":13}},"3c7cd74b-4a5e-48d0-9c18-b2711814adbe"],[{"index":{"value":969},"size":{"value":23}},"dac11214-f943-46f5-b574-5f1fee025c58"],[{"index":{"value":969},"size":{"value":33}},"a10df9c7-2ff4-4f8c-be09-986eaf384835"],[{"index":{"value":1016},"size":{"value":46}},"329a88ff-e41a-42fe-9ebf-8d75cfdec1c9"],[{"index":{"value":1076},"size":{"value":24}},"ff499ea5-254a-42cc-8871-daeebc47873e"],[{"index":{"value":1113},"size":{"value":41}},"83917b7f-f53a-4fb8-a3fc-c0a1ccf56baf"],[{"index":{"value":1166},"size":{"value":40}},"699f6c08-da0b-416f-a897-00a24877e75c"]]
{"ide":{"node":{"d619ae3d-cd50-458f-91a3-444b1b3562bf":{"position":{"vector":[-1565,191]}},"d40701f9-16b3-4479-991b-2a94fd2df4f7":{"position":{"vector":[-1288,121]}},"ead90d94-6e68-4c15-b269-93f1594c8e12":{"position":{"vector":[-1565,49]},"visualization":{"show":false,"width":756.3594360351562}},"d4f3ca8c-70ee-47a4-91a8-7f5c2a66ff7f":{"position":{"vector":[-1664,-23]},"visualization":{"show":true,"height":251.60003662109375}},"90b382be-3f76-40f7-b2d1-a9a25651687e":{"position":{"vector":[-1237,-226]}},"2313002a-b2c8-4a2b-b920-de2fc25624d7":{"position":{"vector":[-1237,-226]}},"195871ba-8ada-4d23-a0ca-8a4e24f3b234":{"position":{"vector":[-1813,-346]},"visualization":{"show":false,"width":513.625}},"b96752c5-83b9-44b1-b2cd-0982ce8e4324":{"position":{"vector":[-1813,-400]},"visualization":{"show":true}},"2af79caa-3529-4c92-b3b9-022f99a0f4a4":{"position":{"vector":[-1813,-400]}},"04610df9-af34-4a05-80ce-8002a3c4db70":{"position":{"vector":[-1189,-23]},"visualization":{"show":false,"height":274.00006103515625}},"8e4dfc38-ad64-477a-80af-b4a4395566a8":{"position":{"vector":[-1161,-23]}},"b767092d-b9cb-479b-88d7-1c43a10da5e5":{"position":{"vector":[-1161,-23]}},"54ee7065-aea3-495d-afbf-9fd94c7d1202":{"position":{"vector":[-637,138]},"visualization":{"show":true}},"25448166-8ed9-448b-b266-7abef975e38a":{"position":{"vector":[-999,-193]}},"2b68a3dc-ce00-4742-ba5b-007f2d2cf3f2":{"position":{"vector":[-1189,-138]},"visualization":{"show":false,"height":322}},"8afa9fdd-0f3e-4e21-9ba1-e4f40354ed8c":{"position":{"vector":[-1113,-131]}},"b57cb825-bc65-4189-b49a-4ae5c1f9dc3a":{"position":{"vector":[-1217,-185]}},"0617570f-507b-4011-95f3-6def84476125":{"position":{"vector":[-1041,-210]}},"01225cb3-fd56-4375-a887-a6f5a04a59aa":{"position":{"vector":[-1217,-238]},"visualization":{"show":false,"height":258}},"a0081028-dd92-4c8c-8c66-f25c28f27d08":{"position":{"vector":[-1162,-292]}},"21ee1a2b-21c9-4305-91e9-486978d4ca0a":{"position":{"vector":[-1162,-292]}},"725af507-0c29-4168-b249-9d25c45f3b3b":{"position":{"vector":[-1217,-274]},"visualization":{"show":false,"height":310.79998779296875}},"2ea4248b-647e-4d9c-b51f-6469aca536eb":{"position":{"vector":[-1136,-334]}},"660c0b13-0ee6-424d-8234-b575e9a25b5d":{"position":{"vector":[-1136,-334]}},"a10df9c7-2ff4-4f8c-be09-986eaf384835":{"position":{"vector":[-1217,-328]}},"dac11214-f943-46f5-b574-5f1fee025c58":{"position":{"vector":[-1142,-375]}},"3c7cd74b-4a5e-48d0-9c18-b2711814adbe":{"position":{"vector":[-1142,-375]}},"329a88ff-e41a-42fe-9ebf-8d75cfdec1c9":{"position":{"vector":[-1217,-378]},"visualization":{"show":false,"height":251.60003662109375}},"ff499ea5-254a-42cc-8871-daeebc47873e":{"position":{"vector":[-1217,-418]}},"83917b7f-f53a-4fb8-a3fc-c0a1ccf56baf":{"position":{"vector":[-1217,-467]},"visualization":{"show":false,"width":672.02490234375,"height":169.20001220703125}},"699f6c08-da0b-416f-a897-00a24877e75c":{"position":{"vector":[-1217,-515]},"visualization":{"show":true}}},"widget":{"54ee7065-aea3-495d-afbf-9fd94c7d1202":{"WidgetTableEditor":{"size":{"x":323.199951171875,"y":150}}}},"snapshot":"eJyVUtFumzAUfc9X3PEww8IsBUibTkIT1bqpL9vUVN0kzJBTnNSLsZExTVbt4yc7wFJNrdYXdPE9557j47vWqoalobKiusLntGXA60ZpA1SIyfpR95quxDPtD9TQ1bMDsm/Lp5uflNoIVmYNfxqzlGq3FnT7SKMvR9DFntaNYO0/jRvedlTwB2q4kpNJTbmEdAIAYNjezCAFb193wo/CJHhddyKPw9Pi1Y9KSWT8oLSteTgPpraIo/AkKXxbzmbhIuhkpfzgvf1fhPMg8NxcqSoWQwo2GqwZrQB9f0fI5/MvhFB1GyWExG+5bDqDzd6gkWO9uLSxZDvIcy/zQsjdtKIoDpZt2852eNxQ3bLSqPJWia6WLaAMgVd3gvg+qaZB6L7kyFcEaT8Et8yAz/aNBpRnMCvgTZ5BVKAAvCvWdsIcWFT+mvWCEaabjWYbahj0immO8bKrAR0o6MhmNNo0asskf3BOtdodbDbUGKZl6lWK+CT47QJ3lfNPqmlIqung3U1MxoBcepDnKEMh5Mi+AgoBVUoS+2qoKOzxhbTgykGudccs5CMVLUOP8pwPmUT4p+Ky1xouPyY2x5rV6p6NYefoim/uDGTHtz6B1LHwmgtRSmXuuNwceSngq2b3XHVteUNFx/4yTwehk6e59haDsXjAn1q8YRpGIGB82ZYj2KEWB2PxC5fGcc8GqUUvVa4ElVv3mONqJQPo7AWrlfRLkvzPav0BR15+BA=="}}